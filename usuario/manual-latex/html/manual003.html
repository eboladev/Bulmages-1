<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>



<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-15">
<META name="GENERATOR" content="hevea 1.08">
<LINK rel="stylesheet" type="text/css" href="manual.css">
<TITLE>
Instalación de Bulmagés
</TITLE>
</HEAD>
<BODY >
<A HREF="manual002.html"><IMG SRC ="previous_motif.gif" ALT="Previous"></A>
<A HREF="index.html"><IMG SRC ="contents_motif.gif" ALT="Up"></A>
<A HREF="manual004.html"><IMG SRC ="next_motif.gif" ALT="Next"></A>
<HR>

<H1 CLASS="chapter"><A NAME="htoc2">Capítulo&nbsp;2</A>&nbsp;&nbsp;Instalación de Bulmagés</H1>
<A NAME="toc1"></A>
<H2 CLASS="section"><A NAME="htoc3">2.1</A>&nbsp;&nbsp;Instalación Rapida</H2>
<UL CLASS="itemize"><LI CLASS="li-itemize">
El primer paso para instalar un programa es descargarlo. Puede obtener un archivo tgz con todos los archivos necesarios para el programa en 
<A HREF="https://developer.berlios.de/project/showfiles.php?group_id=4472"><TT>https://developer.berlios.de/project/showfiles.php?group_id=4472</TT></A>
<LI CLASS="li-itemize">A continuación descomprima el archivo tgz en un directorio
<LI CLASS="li-itemize">Ejecute como root el script de instalación install-bulmages 
<LI CLASS="li-itemize">Compruebe que el directorio /usr/local/bin se encuentra en el path. 
<LI CLASS="li-itemize">Para arrancar el programa basta con escribir bulmages. 
</UL>
Para el correcto funcionamiento del programa se requiere:
<UL CLASS="itemize"><LI CLASS="li-itemize">
postgresql <SUP><A NAME="text1" HREF="#note1">1</A></SUP>
<LI CLASS="li-itemize">libpq 
</UL>
<A NAME="toc2"></A>
<H2 CLASS="section"><A NAME="htoc4">2.2</A>&nbsp;&nbsp;Instalación Manual</H2>
En este punto se detallará todos los requisitos necesarios para poner en funcionamiento el programa, sin necesidad de utilizar el script de instalación. De esta
forma, será más fácil comprender los componentes del programa.<BR>
<BR>
Esta instalación es un poco más laboriosa, pero permite tener mayor control sobre los componentes de la aplicación. No es precios ejecutar el script de
instalación installbulmages para que funcione, pero si lo es tener acceso de root en la máquina en la que se vaya a instalar el programa.<BR>
<BR>

<H3 CLASS="subsection"><A NAME="htoc5">2.2.1</A>&nbsp;&nbsp;Instalacion de los servicios</H3>
Supondremos que tenemos el servidor de postgresql instalado y correctamente configurado. Para instalar las bases de datos requeridas para que funcione Bulmagés
podemos acceder al directorio dbmodels y buscar en ella tres archivos de bases de datos (pgdump). Si nuestro usuario no esta dado de alta en postgres podemos
hacerlo mediante el comando (supondremos que el usuario tborras no tiene permisos para acceder a bases de datos de postgres):
<PRE CLASS="verbatim">
/root/:# su postgres
/home/postgres:$ createuser tborras
</PRE>
El primer comando hace que el sistema entre en la cuenta de superusuario de postgres, de esta forma podemos ejecutar comandos en la base de datos. El segundo
comando crea el usuario tborras, para que pueda acceder a la base de datos.<BR>
<BR>
Tras estos dos comandos se nos harán algunas preguntas sobre si queremos que nuestro usuario pueda crear nuevas bases de datos (Responderemos que SI).<BR>
<BR>
Hecho esto ya podemos crear las bases de datos del programa mediante los comandos :
<PRE CLASS="verbatim">
/home/tborras:$ createdb bulmages
/home/tborras:$ createdb metabd
/home/tborras:$ createdb bgplangcont

</PRE>
Si todo ha funcionado bien el sistema nos devolverá el mensaje CREATE DATABASE indicando que la base de datos ha sido creada.<BR>
<BR>
Luego podemos volcar los datos que se suministran con la instalacióndel programa 
<PRE CLASS="verbatim">
/home/tborras:$ psql bulmages &lt; bulmages.pgdump
/home/tborras:$ psql metabd &lt; metabd.pgdump
/home/tborras:$ psql bgplangcont &lt; bgplangcont.pgdump
</PRE>
Estos comandos deben generar bastante salida en pantalla. Si todo ha ido correctamente, y no ha salido ningun mensaje de error, en el sistema estarán creadas las
bases de datos que va a utlizar el programa.<BR>
<BR>
Si se ha producido algún error, o queremos volver a instalar siempre podemos borrar la base de datos con el comando:
<PRE CLASS="verbatim">
/home/tborras:$ dropdb bulmages
/home/tborras:$ dropdb metabd
/home/tborras:$ dropdb bgplangcont
</PRE>
Le recomendamos que la el manual de referéncia de postgreSQL (<A HREF="http://www.postgresql.org"><TT>http://www.postgresql.org</TT></A>) para más información sobre la administración de bases de datos.<BR>
<BR>

<H3 CLASS="subsection"><A NAME="htoc6">2.2.2</A>&nbsp;&nbsp;Instalación del cliente de contabilidad</H3>
Para instalar el cliente de contabilidad lo único que debemos hacer es copiar una serie de archivos en determinadas ubicaciones.
<OL CLASS="enumerate" type=1><LI CLASS="li-enumerate">
Copiar bulmages.conf en el directorio etc/
Este es el archivo de configuración del programa y debe tener permisos de lectura.<BR>
<BR>
<LI CLASS="li-enumerate">Copiar bulmages, borraremp, cargaemp, guardaemp y nuevaemp en /usr/local/bin
Estos archivos son los ejecutables y deben tener permisos de ejecución. Además, el directorio /usr/local/bin debe estar en el PATH para que pueda ser ejecutado.<BR>
<BR>
<LI CLASS="li-enumerate">Copiar el resto de archivos en /usr/share/bulmages
Estos son los archivos auxilares del programa y deben tener permisos de lectura.
Es posible que la parte cliente y la parte servidor estén alojadas en distintas máquinas. Incluso pueden tener diversos clientes atacando a una misma base de
datos. Para hacerlo, existen dos parámetros en el archivo /etc/bulmages.conf que indican a qué servidor de bases de datos ha de dirigirse el programa. Estos
parámetros son CONF_SERVIDOR y CONF_PUERTO, donde se puede indicar a qué servidor de bases de datos y puerto de conexión debe realizar el programa las
peticiones de base de datos.
</OL>

<H3 CLASS="subsection"><A NAME="htoc7">2.2.3</A>&nbsp;&nbsp;Configuración del motor de bases de datos PostgreSQL</H3>
La mayor complicación que puede surgir con el programa es la correcta instalación de las bases de datos.<BR>
<BR>

<H4 CLASS="subsubsection">Permisos de los usuarios</H4>
Postgres trabaja con diversos métodos de autentificación. Estas opciones se configuran en el archivo pg_hba.conf. Esta es la principal causa de problemas en la
instalación del programa. (En Debian este archivo se encuentra en el directorio /etc/postgresql/)
La opción de autentificación trust permite que todos los usuarios tengan acceso a la base de datos. De esta forma no habrña problemas con los rama funcionará
correctamente.
La opción de autentificación ident sameuser sólo permite el acceso a la base de datos a aquellos usuarios que han sido creados previamente. Esta opción es más
segura ya que sólo los usuarios que tengan cuenta en el ordenador tendrán acceso a la base de datos. Para utilizar Bulmagés con este modelo es importante
asegurarse de que los usuarios que van a usar el programa están dados de alta en la base de datos. Para ello se puede utilizar el comando:
<PRE CLASS="verbatim">
/home/postgres:$ create user xxxxxxxx

</PRE>
donde xxxxxxxxx es el login del usuario al que se le otorgan permisos de acceso a la base de datos.<BR>
<BR>
<HR WIDTH="50%" SIZE=1><DL CLASS="list"><DT CLASS="dt-list"><A NAME="note1" HREF="#text1"><FONT SIZE=5>1</FONT></A><DD CLASS="dd-list">Revise el apartado de Configuración del Motor de la Base de Datos PostgreSQL de esta misma sección para comprobar que la base de datos
está correctamente instalda.
</DL>
<HR>
<A HREF="manual002.html"><IMG SRC ="previous_motif.gif" ALT="Previous"></A>
<A HREF="index.html"><IMG SRC ="contents_motif.gif" ALT="Up"></A>
<A HREF="manual004.html"><IMG SRC ="next_motif.gif" ALT="Next"></A>
</BODY>
</HTML>
